<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://starsci.cn">
  <title>THE ISLET</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Life is Wonderful!">
<meta property="og:type" content="website">
<meta property="og:title" content="THE ISLET">
<meta property="og:url" content="http://starsci.cn/index.html">
<meta property="og:site_name" content="THE ISLET">
<meta property="og:description" content="Life is Wonderful!">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="THE ISLET">
<meta name="twitter:description" content="Life is Wonderful!">
  
    <link rel="alternative" href="/atom.xml" title="THE ISLET" type="application/atom+xml">
  
  
    <link rel="icon" href="https://avatars3.githubusercontent.com/u/10227574?v=3&s=460">
  
  <link rel="stylesheet" type="text/css" href="/./main.234bc0.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=869496359,771840112&amp;fm=23&amp;gp=0.jpg" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">JIN</a></h1>
		</hgroup>
		
		<p class="header-subtitle">关山万里，仗剑行歌</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/categories/deep-learning">深度学习</a></li>
	        
				<li><a href="/categories/machine-learning">机器学习</a></li>
	        
				<li><a href="/categories/computer-vision">计算机视觉</a></li>
	        
				<li><a href="/categories/algorithm">算法</a></li>
	        
				<li><a href="/categories/cplusplus">C++</a></li>
	        
				<li><a href="/categories/python">Python</a></li>
	        
				<li><a href="/categories/tools">工具</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">This is Tags Cloud</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/atranitell" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/3090045361/profile?topnav=1&wvr=6&is_all=1" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="mail" target="_blank" href="mailto:atranitell@outlook.com" title="mail"><i class="icon-mail"></i></a>
		        
					<a class="linkedin" target="_blank" href="/www.linkedin.com/in/jin-kai-b7b277b8/" title="linkedin"><i class="icon-linkedin"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=869496359,771840112&amp;fm=23&amp;gp=0.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">JIN</h1>
			</hgroup>
			
			<p class="header-subtitle"><i class="icon icon-quo-left"></i>关山万里，仗剑行歌<i class="icon icon-quo-right"></i></p>
			
			
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/atranitell" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/3090045361/profile?topnav=1&wvr=6&is_all=1" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="mail" target="_blank" href="mailto:atranitell@outlook.com" title="mail"><i class="icon-mail"></i></a>
			        
						<a class="linkedin" target="_blank" href="/www.linkedin.com/in/jin-kai-b7b277b8/" title="linkedin"><i class="icon-linkedin"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 70%">
				
				
					<li style="width: 14.285714285714286%"><a href="/categories/deep-learning">深度学习</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="/categories/machine-learning">机器学习</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="/categories/computer-vision">计算机视觉</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="/categories/algorithm">算法</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="/categories/cplusplus">C++</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="/categories/python">Python</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="/categories/tools">工具</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-cxx/cpp-small-skills" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/15/cxx/cpp-small-skills/">c++ 小技巧汇总</a>
    </h1>
  

        
        <a href="/2017/06/15/cxx/cpp-small-skills/" class="archive-article-date">
  	<time datetime="2017-06-15T02:59:08.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-06-15</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="如何获取-cpp文件行号与文件名"><a href="#如何获取-cpp文件行号与文件名" class="headerlink" title="如何获取.cpp文件行号与文件名"></a>如何获取.cpp文件行号与文件名</h3><p>先介绍几个编译器内置的宏定义，这些宏定义不仅可以帮助我们完成跨平台的源码编写，灵活使用也可以巧妙地帮我们输出非常有用的调试信息。ANSI C标准中有几个标准预定义宏（也是常用的）：</p>
<ul>
<li><strong>LINE</strong>：在源代码中插入当前源代码行号；</li>
<li><strong>FILE</strong>：在源文件中插入当前源文件名；</li>
<li><strong>DATE</strong>：在源文件中插入当前的编译日期</li>
<li><strong>TIME</strong>：在源文件中插入当前编译时间；</li>
<li><strong>STDC</strong>：当要求程序严格遵循ANSI C标准时该标识被赋值为1；</li>
<li>__cplusplus：当编写C++程序时该标识符被定义。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;  </span></span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;  </div><div class="line">  <span class="keyword">char</span> file[<span class="number">16</span>];  </div><div class="line">  <span class="keyword">char</span> func[<span class="number">16</span>];  </div><div class="line">  <span class="keyword">int</span> line;   </div><div class="line">  <span class="built_in">sprintf</span>(file,__FILE__); <span class="comment">//文件名  </span></div><div class="line">  <span class="built_in">sprintf</span>(func,__FUNCTION__); <span class="comment">//函数名  </span></div><div class="line">  <span class="built_in">printf</span>(<span class="string">"file=%s\n"</span>,file);  </div><div class="line">  <span class="built_in">printf</span>(<span class="string">"func=%s\n"</span>,func);  </div><div class="line">  <span class="built_in">printf</span>(<span class="string">"%05d\n"</span>,__LINE__); <span class="comment">//行号   </span></div><div class="line">  <span class="keyword">return</span> <span class="number">0</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="如何跨平台编写"><a href="#如何跨平台编写" class="headerlink" title="如何跨平台编写"></a>如何跨平台编写</h3><p>操作系统判定： </p>
<ul>
<li>Windows: WIN32 </li>
<li>Linux: linux </li>
<li>Solaris: __sun<br>编译器判定： </li>
<li>VC: _MSC_VER </li>
<li>GCC/G++: <strong>GNUC</strong> </li>
<li>SunCC: <strong>SUNPRO_C 和 </strong>SUNPRO_CC</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">print1</span><span class="params">()</span></span>&#123;</div><div class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"this is window"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">print2</span><span class="params">()</span></span>&#123;</div><div class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"this is linux"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> WIN32</span></div><div class="line">  print1();</div><div class="line"><span class="meta">#<span class="meta-keyword">elif</span> linux</span></div><div class="line">  print1();</div><div class="line"><span class="meta">#<span class="meta-keyword">else</span></span></div><div class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"unknown os"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">  <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">c++</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/cplusplus/" class="article-tag-list-link color5">cplusplus</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/06/15/cxx/cpp-small-skills/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-tools/benchmark-lighted-database" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/01/tools/benchmark-lighted-database/">轻量级数据库的性能比较</a>
    </h1>
  

        
        <a href="/2017/06/01/tools/benchmark-lighted-database/" class="archive-article-date">
  	<time datetime="2017-06-01T01:04:28.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-06-01</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>转自：<a href="https://www.influxdata.com/benchmarking-leveldb-vs-rocksdb-vs-hyperleveldb-vs-lmdb-performance-for-influxdb/" target="_blank" rel="external">Benchmarking LevelDB vs. RocksDB vs. HyperLevelDB vs. LMDB Performance for InfluxDB</a></p>
</blockquote>
<p>For quite some time we’ve wanted to test the performance of different storage engines for our use case with InfluxDB. We started off using LevelDB because it’s what we had used on earlier projects and RocksDB wasn’t around yet. We’ve finally gotten around to running some basic tests against a few different engines. Going forward it looks like RocksDB might be the best choice for us.</p>
<p>However, we haven’t had the time to tune any settings or refactor things to take advantage of specific storage engine characteristics. We’re open to suggestions so read on for more detail.</p>
<p>Before we get to results, let’s look at the test setup. We used a Digital Ocean droplet with 4GB RAM, 2 Cores, and 60GB of SSD storage.</p>
<p>The next release of InfluxDB has a clearly defined interface for adding different storage engines. You’ll be able to choose LevelDB, RocksDB, HyperLevelDB, or LMDB. Which one you use is set through the <a href="https://github.com/influxdb/influxdb/blob/master/config.sample.toml#L74-L132" target="_blank" rel="external">configuration file</a>.</p>
<p>Under the covers LevelDB is a <a href="http://en.wikipedia.org/wiki/Log-structured_merge-tree" target="_blank" rel="external">Log Structured Merge Tree</a> while LMDB is a mmap copy on <a href="http://en.wikipedia.org/wiki/B%2B_tree" target="_blank" rel="external">writeB+Tree</a>. RocksDB and HyperLevelDB are forks of the LevelDB project that have different optimizations and enhancements.</p>
<p>Our tests used a <a href="https://github.com/influxdb/influxdb/tree/master/src/tools/benchmark-storage" target="_blank" rel="external">benchmark tool that isolated the storage engines</a> for testing. The test does the following:</p>
<ul>
<li>Write N values where the key is 24 bytes (3 ints)</li>
<li>Query N values (range scans through the key space in ascending order and does compares to see if it should stop)</li>
<li>Delete N/2 values</li>
<li>Run compaction</li>
<li>Query N/2 values</li>
<li>Write N/2 values</li>
</ul>
<p>At various steps we checked what the on disk size of the database was. We went through multiple runs writing anywhere from 1 million to 100 million values. Which implementation came out on top differed depending on how many values were in the database.</p>
<p>For our use case we want to test on databases that have more values rather than less so we’ll focus on the results for the biggest run. We’re also not benchmarking <code>put</code> operations on keys that already exist. It’s either inserts or deletes, which is almost always the use case with time series data.</p>
<p>The keys consist of 3 unsigned integers that are converted into big endian bytes. The first is an id that would normally represent a time series column id, the second is a time stamp, and the third is a sequence number. The benchmark simulates values written into a number of different ids (the first 8 bytes) and increasing time stamps and sequence numbers. This is a common load pattern for InfluxDB. Single points written to many series or columns at a time.</p>
<p>Writes during the test happen in batches of 1,000 key/value pairs. Each key/value pair is a different series column id up to the number of series to write in the test. The value is a serialized protobuf object. Specifically, it’s a <a href="https://github.com/influxdb/influxdb/blob/master/src/protocol/protocol.proto#L3-L9" target="_blank" rel="external">FieldValue</a> with an <code>int64</code> set.</p>
<p>Here are the results of a run on 100 million values spread out over 500k columns:</p>
<center><img src="/image/benchmarks-lighted-database.png" height="50%"></center>

<p>A few interesting things come out of these results. LevelDB is the winner on disk space utilization, RocksDB is the winner on reads and deletes, and HyperLevelDB is the winner on writes. On smaller runs (30M or less), LMDB came out on top on most of the metrics except for disk size. This is actually what we’d expect for B-trees: they’re faster the fewer keys you have in them.</p>
<p>I’ve marked the LMDB compaction time as a loser in red because it’s a no-op and deletes don’t actually reclaim disk space. On a normal database where you’re continually writing data, this is ok because the old pages get used up. However, it means that the DB will ONLY increase in size. For InfluxDB this is a problem because we create a separate database per time range, which we call a shard. This means that after a time range has passed, it probably won’t be getting any more writes. If we do a delete, we need some form of compaction to reclaim the disk space.</p>
<p>On disk space utilization, it’s no surprise that the Level variants came out on top. They compress the data in blocks while LMDB doesn’t use compression.</p>
<p>Overall it looks like RocksDB might be the best choice for our use case. However, <strong>there are lies, damn lies, and benchmarks</strong>. Things can change drastically based on hardware configuration and settings on the storage engines.</p>
<p>We tested on SSD because that’s where things are going (if not already there). Rocks won’t perform as well on spinning disks, but it’s not the primary target hardware for us. You could also potentially create a configuration with smaller shards and use LMDB for screaming fast performance.</p>
<p>Here’s <a href="https://gist.github.com/pauldix/db7dca9595e5c359ceb8" target="_blank" rel="external">a gist of more of the results from different benchmark runs</a>.</p>
<p>We’re open to updating settings, benchmarks, or adding new storage engines. In the meantime we’ll keep iterating and try to get to the best possible performance for the use case of time series data.</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">database</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">benchmark</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/tools/" class="article-tag-list-link color1">tools</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/06/01/tools/benchmark-lighted-database/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-cxx/cplusplus-generic-programming" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/02/cxx/cplusplus-generic-programming/">泛型编程</a>
    </h1>
  

        
        <a href="/2017/05/02/cxx/cplusplus-generic-programming/" class="archive-article-date">
  	<time datetime="2017-05-02T01:04:25.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-02</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近在学习<code>算法导论</code>，顺便温习一下以前的C++概念，确实很久很久没有接触过C++了。现在回头重新看这些知识点发现自己真的是只掌握了一丢丢的皮毛而已。这部分是关于<code>STL</code>的系列，回头将这些内容慢慢补齐。</p>
<p>现代C++中STL有六大组件：</p>
<ul>
<li>容器 </li>
<li>配置器</li>
<li>迭代器</li>
<li>算法</li>
<li>配接器</li>
<li>仿函数</li>
</ul>
<h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><p>一般而言，我们针对<code>数据</code>抽象出其中的共性，构建成<code>数据结构</code>来表示一个通用的数据概念。而<code>泛型编程</code>是通过抽象可重用的<code>算法</code>来表示一种通用方法。简单说，链表、数组、队列等等都具有不同的数据结构，但遍历的操作、读取某一元素的操作往往是相似的，这时候我们利用迭代器<code>iterator</code>来完成。</p>
<p>简单来说，迭代器就是一个可控的指针，可以有一些列的操作方式：</p>
<ul>
<li>为了能够对迭代器执行<strong>解引用操作</strong>，访问其指向的元素，需要定义<code>*p</code></li>
<li>为了能够将一个迭代器的指向位置<strong>赋值</strong>给另一个，需要定义<code>p=q</code></li>
<li>为了能够实现<strong>比较操作</strong>，需要定义<code>p==q</code>或者<code>p!=q</code></li>
<li>为了能够实现<strong>遍历操作</strong>，至少需要定义<code>++p</code>或者<code>p++</code>操作</li>
</ul>
<h4 id="for-的实现"><a href="#for-的实现" class="headerlink" title="for(:)的实现"></a>for(:)的实现</h4><p>对于<code>for(:)</code>是C++11的新语法，我们可以通过实现迭代器来实现对自定义数据结构的循环遍历。为实现for(:)我们需要定义以下：</p>
<ul>
<li><code>begin()</code>和<code>end()</code>获取第一个元素的指针和超尾指针。</li>
<li>重载<code>++</code>操作以满足遍历需求。</li>
<li>重载<code>!=</code>操作以在达到<code>end()</code>时终止操作。</li>
<li>重载<code>*</code>操作以读取该元素的值。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><span class="keyword">class</span> DLinkNode &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    T data;</div><div class="line">    DLinkNode *prev;</div><div class="line">    DLinkNode *next;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><span class="keyword">class</span> DLinkList &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">class</span> iterator &#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        iterator();</div><div class="line">        iterator(DLinkNode&lt;T&gt; *s);</div><div class="line">        iterator(<span class="keyword">const</span> iterator &amp;s);</div><div class="line"></div><div class="line">        DLinkNode&lt;T&gt; <span class="keyword">operator</span>*() <span class="keyword">const</span>;</div><div class="line">        iterator&amp; <span class="keyword">operator</span>++();	</div><div class="line">        <span class="keyword">bool</span> <span class="keyword">operator</span>!=(<span class="keyword">const</span> iterator&amp; p);	</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        DLinkNode&lt;T&gt; *_cur;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    DLinkList();</div><div class="line">    DLinkList(<span class="keyword">const</span> DLinkList&amp; s);</div><div class="line">    ~DLinkList();</div><div class="line"></div><div class="line">    <span class="comment">// iterator</span></div><div class="line">    <span class="function">iterator <span class="title">begin</span><span class="params">()</span></span>;</div><div class="line">    <span class="function">iterator <span class="title">end</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line"><span class="keyword">protected</span>:</div><div class="line">    DLinkNode&lt;T&gt; *_head;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>首先我们定义了一个双向链表(这里省去了双向链表的插入、删除等操作)，只是一个结构上的示意。<code>iterator</code>定义为<code>嵌套类</code>或<code>内部类</code>。下面是一些内部实现的具体细节：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><span class="keyword">inline</span> <span class="keyword">typename</span> DLinkList&lt;T&gt;::iterator DLinkList&lt;T&gt;::begin() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">typename</span> DLinkList&lt;T&gt;::iterator(_head);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里需要注意的是，类<code>iterator</code>是从属于类<code>DlinkList&lt;T&gt;</code>，因此在类外需要用<code>typename</code>关键词声明该类型为<code>嵌套从属类型</code>。</p>
<blockquote>
<p>完整的实现可以访问：<br><a href="https://github.com/atranitell/startup/blob/master/startup/structure/doubly_linked_list.hpp" target="_blank" rel="external">https://github.com/atranitell/startup/blob/master/startup/structure/doubly_linked_list.hpp</a></p>
</blockquote>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">c++</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">STL</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/cplusplus/" class="article-tag-list-link color5">cplusplus</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/02/cxx/cplusplus-generic-programming/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-machine-learning/machine-learning-common-summary" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/28/machine-learning/machine-learning-common-summary/">机器学习常用算法盘点</a>
    </h1>
  

        
        <a href="/2017/04/28/machine-learning/machine-learning-common-summary/" class="archive-article-date">
  	<time datetime="2017-04-28T00:52:57.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-28</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>翻译来源：<a href="http://machinelearningmastery.com/a-tour-of-machine-learning-algorithms/" target="_blank" rel="external">http://machinelearningmastery.com/a-tour-of-machine-learning-algorithms/</a></p>
</blockquote>
<p>在本文中，我将提供两种分类机器学习算法的方法。一是根据学习方式分类，二是根据类似的形式或功能分类。这两种方法都很有用，不过，本文将侧重后者，也就是根据类似的形式或功能分类。在阅读完本文以后，你将会对监督学习中最受欢迎的机器学习算法，以及它们彼此之间的关系有一个比较深刻的了解。</p>
<center><img src="/image/Machine-Learning-Algorithms-Mindmap-Sample.png" width="100%"></center>

<h3 id="从学习方式分类"><a href="#从学习方式分类" class="headerlink" title="从学习方式分类"></a>从学习方式分类</h3><p>算法对一个问题建模的方式很多，可以基于经历、环境，或者任何我们称之为输入数据的东西。机器学习和人工智能的教科书通常会让你首先考虑算法能够采用什么方式学习。实际上，算法能够采取的学习方式或者说学习模型只有几种，下面我会一一说明。对机器学习算法进行分类是很有必要的事情，因为这迫使你思考输入数据的作用以及模型准备过程，从而选择一个最适用于你手头问题的算法。</p>
<ul>
<li><strong>监督学习：</strong>输入数据被称为训练数据，并且每一个都带有标签，比如“广告/非广告”，或者当时的股票价格。通过训练过程建模，模型需要做出预测，如果预测出错会被修正。直到模型输出准确的结果，训练过程会一直持续。常用于解决的问题有分类和回归。常用的算法包括逻辑回归和BP神经网络。</li>
<li><strong>无监督学习：</strong>输入数据没有标签，输出没有标准答案，就是一系列的样本。无监督学习通过推断输入数据中的结构建模。这可能是提取一般规律，可以是通过数学处理系统地减少冗余，或者根据相似性组织数据。常用于解决的问题有聚类、降维和关联规则的学习。常用的算法包括 Apriori 算法和 K 均值算法。</li>
<li><strong>半监督学习：</strong>半监督学习的输入数据包含带标签和不带标签的样本。半监督学习的情形是，有一个预期中的预测，但模型必须通过学习结构整理数据从而做出预测。常用于解决的问题是分类和回归。常用的算法是所有对无标签数据建模进行预测的算法（即无监督学习）的延伸。</li>
</ul>
<h3 id="从功能角度分类"><a href="#从功能角度分类" class="headerlink" title="从功能角度分类"></a>从功能角度分类</h3><p>研究人员常常通过功能相似对算法进行分类。例如，基于树的方法和基于神经网络的方法。这种方法也是我个人认为最有用的分类方法。不过，这种方法也并非完美，比如学习矢量量化（LVQ），就既可以被归为神经网络方法，也可以被归为基于实例的方法。此外，像回归和聚类，就既可以形容算法，也可以指代问题。</p>
<ul>
<li><p><strong>回归算法：</strong>回归分析是研究自变量和因变量之间关系的一种预测模型技术。这些技术应用于预测时间序列模型和找到变量之间关系。回归分析也是一种常用的统计学方法，经由统计机器学习融入机器学习领域。“回归”既可以指算法也可以指问题，因此在指代的时候容易混淆。实际上，回归就是一个过程而已。常用的回归算法包括：<br><code>普通最小二乘回归（OLSR）</code>，<code>线性回归</code>，<code>逻辑回归</code>，<code>逐步回归</code>，<code>多元自适应回归样条法（MARS）</code>，<code>局部估计平滑散点图（LOESS）</code></p>
</li>
<li><p><strong>基于实例的学习算法：</strong>基于实例的学习通过训练数据的样本或事例建模，这些样本或事例也被视为建模所必需的。这类模型通常会建一个样本数据库，比较新的数据和数据库里的数据，通过这种方式找到最佳匹配并做出预测。换句话说，这类算法在做预测时，一般会使用相似度准则，比对待预测的样本和原始样本之间的相似度，再做出预测。因此，基于实例的方法也被称之为赢家通吃的方法（winner-take-all）和基于记忆的学习（memory-based learning）。常用的基于实例的学习算法包括：<code>k-邻近算法（kNN）</code>，<code>学习矢量量化算法（LVQ）</code>，<code>自组织映射算法（SOM）</code>，<code>局部加权学习算法（LWL）</code></p>
</li>
<li><p><strong>正则化算法：</strong>正则化算法背后的思路是，参数值比较小的时候模型更加简单。对模型的复杂度会有一个惩罚值，偏好简单的、更容易泛化的模型，正则化算法可以说是这种方法的延伸。我把正则化算法单独列出来，原因就是我听说它们十分受欢迎、功能强大，而且能够对其他方法进行简单的修饰。常用的正则化算法包括：<code>岭回归</code>，<code>LASSO 算法</code>，<code>Elastic Net</code>，<code>最小角回归算法（LARS）</code></p>
</li>
<li><p><strong>决策树算法：</strong>决策树算法的目标是根据数据属性的实际值，创建一个预测样本目标值的模型。训练时，树状的结构会不断分叉，直到作出最终的决策。也就是说，预测阶段模型会选择路径进行决策。决策树常被用于分类和回归。决策树一般速度快，结果准，因此也属于最受欢迎的机器学习算法之一。常用的决策树算法包括：<code>分类和回归树（CART）</code>，<code>ID3 算法</code>，<code>C4.5 算法和 C5.0 算法</code>，<code>CHAID 算法</code>，<code>单层决策树</code>，<code>M5 算法</code>，<code>条件决策树</code></p>
</li>
<li><p><strong>贝叶斯算法：</strong>贝叶斯方法指的是那些明确使用贝叶斯定理解决分类或回归等问题的算法。常用的贝叶斯算法包括：<code>朴素贝叶斯算法</code>，<code>高斯朴素贝叶斯算法</code>，<code>多项式朴素贝叶斯算法</code>，<code>AODE 算法</code>，<code>贝叶斯信念网络（BBN）</code>，<code>贝叶斯网络（BN）</code></p>
</li>
<li><p><strong>聚类算法：</strong>聚类跟回归一样，既可以用来形容一类问题，也可以指代一组方法。聚类方法通常涉及质心（centroid-based）或层次（hierarchal）等建模方式，所有的方法都与数据固有的结构有关，目标是将数据按照它们之间共性最大的组织方式分成几组。换句话说，算法将输入样本聚成围绕一些中心的数据团，通过这样的方式发现数据分布结构中的规律。常用的聚类算法包括：<code>K-均值</code>，<code>K-中位数</code>，<code>EM 算法</code>，<code>分层聚类算法</code></p>
</li>
<li><p><strong>关联规则学习：</strong>关联规则学习在数据不同变量之间观察到了一些关联，算法要做的就是找出最能描述这些关系的规则，也就是获取一个事件和其他事件之间依赖或关联的知识。常用的关联规则算法有：<code>Apriori 算法</code>，<code>Eclat 算法</code></p>
</li>
<li><p><strong>人工神经网络：</strong>人工神经网络是一类受生物神经网络的结构及/或功能启发而来的模型。它们是一类常用于解决回归和分类等问题的模式匹配，不过，实际上是一个含有成百上千种算法及各种问题变化的子集。注意这里我将深度学习从人工神经网络算法中分离了出去，因为深度学习实在太受欢迎。人工神经网络指的是更加经典的感知方法。常用的人工神经网络包括：<code>感知机</code>，<code>反向传播算法（BP 神经网络）</code>，<code>Hopfield网络</code>，<code>径向基函数网络（RBFN）</code></p>
</li>
<li><p><strong>深度学习算法：</strong>深度学习算法是人工神经网络的升级版，充分利用廉价的计算力。近年来，深度学习得到广泛应用，尤其是语音识别、图像识别。深度学习算法会搭建规模更大、结构更复杂的神经网络，正如上文所说，很多深度学习方法都涉及半监督学习问题，这种问题的数据一般量极大，而且只有很少部分带有标签。常用的深度学习算法包括：<code>深度玻尔兹曼机（DBM）</code>，<code>深度信念网络（DBN）</code>，<code>卷积神经网络（CNN）</code>，<code>栈式自编码算法（Stacked Auto-Encoder）</code></p>
</li>
<li><p><strong>降维算法：</strong>降维算法和聚类有些类似，也是试图发现数据的固有结构。但是，降维算法采用的是无监督学习的方式，用更少（更低维）的信息进行总结和描述。降维算法可以监督学习的方式，被用于多维数据的可视化或对数据进行简化处理。很多降维算法经过修改后，也被用于分类和回归的问题。常用的降维算法包括：<code>主成分分析法（PCA）</code>，<code>主成分回归（PCR）</code>，<code>偏最小二乘回归（PLSR）</code>，<code>萨蒙映射</code>，<code>多维尺度分析法（MDS）</code>，<code>投影寻踪法（PP）</code>，<code>线性判别分析法（LDA）</code>，<code>混合判别分析法（MDA）</code>，<code>二次判别分析法（QDA）</code>，<code>灵活判别分析法（Flexible Discriminant Analysis，FDA）</code></p>
</li>
<li><p><strong>模型融合算法：</strong>模型融合算法将多个简单的、分别单独训练的弱机器学习算法结合在一起，这些弱机器学习算法的预测以某种方式整合成一个预测。通常这个整合后的预测会比单独的预测要好一些。构建模型融合算法的主要精力一般用于决定将哪些弱机器学习算法以什么样的方式结合在一起。模型融合算法是一类非常强大的算法，因此也很受欢迎。常用的模型融合增强方法包括：<code>Boosting</code>，<code>Bagging</code>，<code>AdaBoost</code>，<code>堆叠泛化（混合）</code>，<code>GBM 算法</code>，<code>GBRT 算法</code>，<code>随机森林</code></p>
</li>
<li><p><strong>其他：</strong>还有很多算法都没有涉及。例如，支持向量机（SVM）应该被归为哪一组？还是说它自己单独成一组？我还没有提到的机器学习算法包括：<code>特征选择算法</code>，<code>Algorithm accuracy evaluation</code>，<code>Performance measures</code></p>
</li>
</ul>
<p><hr></p>
<center><img src="/image/Machine-Learning-Algorithms-Mindmap-Sample1.png" width="100%"></center>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">machine-learning</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/machine-learning/" class="article-tag-list-link color2">machine-learning</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/28/machine-learning/machine-learning-common-summary/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-cxx/cplus-plus-memory-allocate" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/21/cxx/cplus-plus-memory-allocate/">c++中的内存分配方式</a>
    </h1>
  

        
        <a href="/2017/04/21/cxx/cplus-plus-memory-allocate/" class="archive-article-date">
  	<time datetime="2017-04-21T06:17:23.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-21</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>一个由<code>C/C++</code>编译程序占用的内存分为以下几个部分：</p>
<ul>
<li><strong>栈区 stack:</strong> 由编译器自动分配释放，存放函数的参数值，局部变量值等。</li>
<li><strong>堆区 heap:</strong> 由程序员分配释放。</li>
<li><strong>全局静态区 static:</strong> 全局变量和静态变量存储是放在一起的，初始化全局变量和静态变量在一块区域，未初始化的全局变量和静态变量在另一块区域。分别是<code>data</code>区和<code>bbs</code>区。</li>
<li><strong>文字常量区:</strong> 常量字符串就放在这里，程序结束后系统统一释放<code>comment</code>区。</li>
<li><strong>程序代码区:</strong> 存放函数体二进制代码<code>code</code>区。</li>
</ul>
<h3 id="函数栈的空间分配方式"><a href="#函数栈的空间分配方式" class="headerlink" title="函数栈的空间分配方式"></a>函数栈的空间分配方式</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c, <span class="keyword">int</span> d)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> e = a;</div><div class="line">    <span class="keyword">int</span> f = b;</div><div class="line">    <span class="keyword">int</span> g = c;</div><div class="line">    <span class="keyword">int</span> h = d;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    test(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面是一段非常简单的C++代码，现在来详细解释一下函数的内存分配问题。在<code>main()</code>函数中调用<code>test(1, 2, 3, 4)</code>函数。在这个过程中，参数以此逆序压入栈中。</p>
<ul>
<li><code>push 4</code>  // 010A1A8E</li>
<li><code>push 3</code>  // 010A1A90</li>
<li><code>push 2</code>  // 010A1A92</li>
<li><code>push 1</code>  // 010A1A94</li>
<li><code>call func_addr</code> // 010A1A96 -&gt; 010A11D6</li>
</ul>
<p>那么<code>010A11D6</code>是哪里呢，实际上在这是一个函数表，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">_RaiseException@16:</div><div class="line">010A11CC  jmp         _RaiseException@16 (010A4DFAh)  </div><div class="line">___raise_securityfailure:</div><div class="line">010A11D1  jmp         __raise_securityfailure (010A48E0h)  </div><div class="line">test:</div><div class="line">010A11D6  jmp         test (010A17F0h)  </div><div class="line">___report_securityfailureEx:</div><div class="line">010A11DB  jmp         __report_securityfailureEx (010A4B90h)  </div><div class="line">__vcrt_va_start_verify_argument_type&lt;char const * const&gt;:</div><div class="line">010A11E0  jmp         __vcrt_va_start_verify_argument_type&lt;char const * const&gt; (010A22A0h)</div></pre></td></tr></table></figure></p>
<p>很明显，函数表里储存了<code>test</code>函数的具体入口地址<code>010A17F0</code>，继续分析。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">void test(int a, int b, int c, int d) &#123;</div><div class="line">008217F0  push        ebp                    // 备份调用方EBP指针</div><div class="line">008217F1  mov         ebp,esp                // 建立被调用方的栈底</div><div class="line">008217F3  sub         esp,0F0h               // 为局部变量分配空间</div><div class="line">008217F9  push        ebx  </div><div class="line">008217FA  push        esi  </div><div class="line">008217FB  push        edi  </div><div class="line">008217FC  lea         edi,[ebp-0F0h]  </div><div class="line">00821802  mov         ecx,3Ch  </div><div class="line">00821807  mov         eax,0CCCCCCCCh  </div><div class="line">0082180C  rep stos    dword ptr es:[edi]      </div><div class="line">	int e = a;</div><div class="line">0082180E  mov         eax,dword ptr [a]      // 注意这里是利用数组索引</div><div class="line">	int e = a;</div><div class="line">00821811  mov         dword ptr [e],eax </div><div class="line">	int f = b;</div><div class="line">00821814  mov         eax,dword ptr [b]  </div><div class="line">00821817  mov         dword ptr [f],eax  </div><div class="line">	int g = c;</div><div class="line">0082181A  mov         eax,dword ptr [c]  </div><div class="line">0082181D  mov         dword ptr [g],eax  </div><div class="line">	int h = d;</div><div class="line">00821820  mov         eax,dword ptr [d]  </div><div class="line">00821823  mov         dword ptr [h],eax  </div><div class="line">&#125;</div><div class="line">00821826  pop         edi  </div><div class="line">00821827  pop         esi  </div><div class="line">00821828  pop         ebx  </div><div class="line">00821829  mov         esp,ebp  </div><div class="line">0082182B  pop         ebp  </div><div class="line">0082182C  ret</div></pre></td></tr></table></figure></p>
<p>回到主函数，继续执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">00C21A9B  add         esp,10h                  // 释放参数空间，恢复调用前的函数栈</div></pre></td></tr></table></figure></p>
<h3 id="变量的存储机制"><a href="#变量的存储机制" class="headerlink" title="变量的存储机制"></a>变量的存储机制</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">int</span> a=<span class="number">0</span>;    <span class="comment">// 全局初始化区</span></div><div class="line"><span class="keyword">char</span> *p1;   <span class="comment">// 全局未初始化区</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> b;                      <span class="comment">// 栈</span></div><div class="line">    <span class="keyword">char</span> s[]=<span class="string">"abc"</span>;             <span class="comment">// 栈</span></div><div class="line">    <span class="keyword">char</span> *p2;                   <span class="comment">// 栈</span></div><div class="line">    <span class="keyword">char</span> *p3=<span class="string">"123456"</span>;          <span class="comment">// 123456\0在常量区，p3在栈上。</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> c=<span class="number">0</span>;             <span class="comment">// 全局（静态）初始化区</span></div><div class="line">    p1 = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="number">10</span>);</div><div class="line">    p2 = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="number">20</span>);     <span class="comment">// 分配得来的10和20字节的区域就在堆区。</span></div><div class="line">    <span class="built_in">strcpy</span>(p1,<span class="string">"123456"</span>);        <span class="comment">// 123456\0放在常量区，编译器可能会将它与p3所向"123456\0"优化成一个地方。</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">c++</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">memory</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/cplusplus/" class="article-tag-list-link color5">cplusplus</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/21/cxx/cplus-plus-memory-allocate/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-deep-learning/softmax-n-softmax-loss" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/17/deep-learning/softmax-n-softmax-loss/">Softmax vs. Sotmax-Loss 数值稳定性</a>
    </h1>
  

        
        <a href="/2017/04/17/deep-learning/softmax-n-softmax-loss/" class="archive-article-date">
  	<time datetime="2017-04-17T02:09:14.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-17</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近一直在和学校的老师做Deep Learning有关的课题，虽然说是在做学术上的事情，可是大多数仍然是工程方面的。现在Deep Learning的一个很大的趋势是工程化。虽然学术界有很多看起来很漂亮的理论和方法，但在实际使用中，用的往往不多，反倒是经过历史检验的那么几种简单朴素的方法却是用途最为广泛。这也是一件挺有意思的事情，越复杂的问题反倒需要越简单的想法去解决，比如<code>SGD</code>，<code>Dropout</code>，<code>BN</code>等等，都不是很复杂的模型，但却是用途最为广泛的技巧。另一个方面是，算法的变革所提升的精度远远不如数据集的扩增，网络的增大收益来的快和简单。因此，工业界往往喜欢boost网络的训练速度，增大数据集，然后不断的调参。</p>
<p>只是最近的一些感慨，我还是蛮喜欢数学上精巧的东西。有意思的事情，前两天一个初中小女孩问我数学题，本来以为信手捏来，结果愣生生把一道简单的集合题做成了解析几何，还需要求高次方程，汗颜。不要问我结果，我已经让那个孩子去问老师了，回来给我讲一讲。这两天把以前保存的文章拿出来，好好咀嚼一下。过去看到一篇好的文章总爱收藏起来却很久再也没有翻开过，似乎看了很多文章，实际上没有经历过真正的推敲和实践就是在自欺欺人。</p>
<h3 id="Softmax"><a href="#Softmax" class="headerlink" title="Softmax"></a>Softmax</h3><blockquote>
<p>转载：<a href="http://freemind.pluskid.org/machine-learning/softmax-vs-softmax-loss-numerical-stability/" target="_blank" rel="external">http://freemind.pluskid.org/machine-learning/softmax-vs-softmax-loss-numerical-stability/</a></p>
</blockquote>
<p>Softmax一般会出现在网络的最后一层，用于输出目标类的概率分布，往往用于分类问题。它的定义如下：$ \sigma(z)=(\sigma_1(z),\dots,\sigma_m(z)) $<br>$$ \sigma_i(z)=\frac{\exp(z_i)}{\sum_{j=1}^{m}\exp(z_j)}, \quad i=1,\dots,m $$<br>它在<code>Logistic Regression</code>里起到的作用是<code>线性预测值</code>转化为类别概率：假设 $z_i=w_i^T+b_i$ 是第 $i$ 个类别的线性预测结果，再将其归一化到 $(0, 1)$ 区间，现在每个 $o_i=\sigma_i(z)$ 就可以解释成观察到的数据 $x$ 属于类别 $i$ 的概率，或者称作似然 (Likelihood)。</p>
<p>然后Logistic Regression的目标函数是根据最大似然原则来建立的，假设数据 $x$ 所对应的类别为 $y$ ，则根据我们刚才的计算最大似然就是要最大化 $o_y$ 的值(或者说，最小化 $-\log(o_y)$ 也叫做<code>negative log-likelihood</code>)，如下：<br>$$ l(y, o) = -\log(o_y) $$</p>
<p>而<code>Softmax-loss</code>就是将两者结合起来，把 $o_y$ 的定义展开即可：<br>$$ \tilde{l}(y,z) = -\log\left(\frac{e^{z_y}}{\sum_{j=1}^{m}e^{z_j}} \right) = \log\left(\sum_{j=1}^{m}e^{z_j}\right) - z_y $$</p>
<p>没有任何fancy的东西，比如如果我们要写一个Logistic Regression的solver，那么因为要处理的就是这个东西，比较自然地就可以将整个东西合在一起来考虑，或者甚至将$z_i=w_i^T+b_i$的定义直接一起带进去然后对$w$和$b$进行求导来得到Gradient Descent的update rule，例如我们之前介绍Gradient Descent的时候举的两类Logistic Regression的例子就是这样做的。</p>
<h3 id="Back-Prop"><a href="#Back-Prop" class="headerlink" title="Back Prop"></a>Back Prop</h3><p>假设存在一个三层的神经网络，如下图：</p>
<center><img src="/image/3nn.png" height="200"></center>

<p>除了最开始的数据层 $L^0$ 之外，每一层都有输入节点和输出节点，我们用 $I_2^1$ 表示第一层的第二个输入节点，$O_3^1$ 表示第一层的第三个输出节点，每一层的输入和输出节点数量并不一定要一样多，但通常情况上一层的输出往往就是下一层结点输入的复制，比如 $I_3^2 = O_3^1$，因为所有的计算都是发生在每一层的内部。所以对普通的神经网络，通常每一层进行的计算都是一个线性映射再加一个<code>activation function</code>，例如<code>sigmoid</code>：<br>$$ O_i^1 = S(\sum_{j=1}^{3}w_{ij}^{1}I_{j}^{1}+b_i^1) = S\left(\left\langle w_i^1, I^1 \right\rangle+b_i^1\right) $$<br>现在要对参数 $w_{ij}^1$ 进行求导计算它的gradient来进行gradient descent一类的参数优化，利用链式法则如下：<br>$$ \frac{\partial{f}}{\partial{w_{ij}^1}} = \sum_{k=1}^{3}\frac{\partial{O_k^1}}{\partial{w_{ij}^1}}\cdot\frac{\partial{f}}{\partial{O_k^1}} $$<br>注意到 $ \partial{O_k^1}/\partial{w_{ij}^1} $ 这一项只是和网络的第一层结构有关，只需要知道该结构内部的参数即可计算，而后面一部分相当于 $ \partial{f}/\partial{O_k^1} = \partial{f}/\partial{I_k^2} $ 即这一层的输出等于下一层的输入。因此，后一项只和下一层的结构和参数有关，不需要知道任何第一层有关的信息。</p>
<p>因此整个网络的参数的gradient的计算方式是从顶层出发，在 $L^p$ 层的时候，会拿到从 $L^{p+1}$ 得到的$\partial{f}/\partial{I^{p+1}}$ 也就是 $\partial{f}/{\partial{O^p}}$， 然后需要做两个计算：一个是自己层内的参数的gradient，比如是一个不同的<code>full connect layer</code>，则会像上文那样计算，如果没有则继续向下传递。根据链式规则，我们可以计算：<br>$$ \frac{\partial{f}}{\partial{O_i^{p-1}}} = \frac{\partial{f}}{\partial{I_i^p}} = \sum_{k=1}^{n}\frac{\partial{O_k^p}}{\partial{I_i^p}}\cdot\frac{\partial{f}}{\partial{O_k^p}} $$</p>
<h3 id="Softmax-Loss"><a href="#Softmax-Loss" class="headerlink" title="Softmax-Loss"></a>Softmax-Loss</h3><p>搞清楚Back Prop之后让我们回到Softmax-Loss层，由于该层没有参数，我们只需要计算向后传递的导数就可以了，此外由于该层是最顶层，所以不使用链式法则就可以计算对于最终输出(loss)的导数。我们用 $\tilde{l}(y,z)$ 表示，其中一个是true label $y$，一个是网络层的输出值 $z$。由于链式法则的缘故，我们只需要计算 $\partial{\tilde{l}}/\partial{z}$ 然后丢给下一层即可。因此：<br>$$ \frac{\partial\tilde{l}(y,z)}{\partial{z_k}} = \frac{\exp(z_k)}{\sum_{j=1}^m\exp(z_j)} - \delta_{ky} = \sigma_{k}(z)-\delta_{ky} $$<br>其中 $\sigma_{k}(z)$ 是Softamx-Loss的中间步骤计算的结果，而 $\delta_{ky}$，当 $k=y$ 时为 $1$，当 $k \ne y$ 时为 $0$，其实就是是否作为变量(常数)对 $z_k$ 求导。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">cnn</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/deep-learning/" class="article-tag-list-link color4">deep-learning</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/17/deep-learning/softmax-n-softmax-loss/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-cxx/cplusplus-template-usage" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/16/cxx/cplusplus-template-usage/">c++ 模板类的使用</a>
    </h1>
  

        
        <a href="/2017/04/16/cxx/cplusplus-template-usage/" class="archive-article-date">
  	<time datetime="2017-04-16T10:52:08.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-16</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天实现了一个很简单的模板类。一开始的思路就和编写普通类一样，定义和实现分离。首先在<code>calculate.h</code>文件中定义了模板类类型。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 在calculate.h文件中</span></div><div class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><span class="keyword">class</span> Calculate &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function">T <span class="title">add</span><span class="params">(T a, T b)</span></span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>然后在<code>calculate.cpp</code>中定义实现。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"calculate.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line">T Calculate&lt;T&gt;::add(T a, T b) &#123;</div><div class="line">	<span class="keyword">return</span> a + b;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在主函数中调用。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"calculate.h"</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	Calculate&lt;<span class="keyword">int</span>&gt; c1;</div><div class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; c1.add(<span class="number">5</span>, <span class="number">6</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>之后便是理所当然的报错。</p>
<blockquote>
<p>error LNK2019: 无法解析的外部符号 “public: int __thiscall Calculate<int>::add(int,int)” (?add@?$Calculate@H@@QAEHHH@Z)，该符号在函数 _main 中被引用<br>fatal error LNK1120: 1 个无法解析的外部命令</int></p>
</blockquote>
<p><strong> 解决方案：模板不支持分离编译, 把你模板类的声明和实现放到.h文件里面 </strong></p>
<h3 id="C-的编译过程"><a href="#C-的编译过程" class="headerlink" title="C++的编译过程"></a>C++的编译过程</h3><p>首先是<code>c++</code>编译的一个简单的过程：</p>
<ul>
<li>一个<code>编译单元（translation unit）</code>指一个<code>.cpp</code>文件以及它所#include的所有<code>.h</code>文件</li>
<li><code>.h</code>文件代码将被扩展并包含到<code>.cpp</code>文件。</li>
<li>该<code>.cpp</code>文件被编译器编译成<code>.obj</code>文件，该文件具备<code>可执行</code>属性，为二进制。因为不保证有<code>main</code>函数接口，所以不一定可以被执行。</li>
<li>工程内所有的<code>.cpp</code>文件被分离编译完成后，再由<code>连接器（linker）</code>进行连接成为一个.exe文件。</li>
</ul>
<p>举例来说：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//---------------test.h-------------------//</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">()</span></span>;<span class="comment">//这里声明一个函数f</span></div><div class="line"></div><div class="line"><span class="comment">//---------------test.cpp--------------//</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span>”test.h”</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</div><div class="line">…<span class="comment">//do something</span></div><div class="line">&#125;  <span class="comment">//这里实现出test.h中声明的f函数</span></div><div class="line"></div><div class="line"><span class="comment">//---------------main.cpp--------------//</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span>”test.h”</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	f(); <span class="comment">//调用f，f具有外部连接类型</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在这个例子中，<code>test. cpp</code>和<code>main.cpp</code>各自被编译成不同的<code>.obj</code>文件（姑且命名为test.obj和main.obj），在<code>main.cpp</code>中，调用了<code>f</code>函数，然而当编译器编译<code>main.cpp</code>时，它所仅仅知道的只是<code>main.cpp</code>中所包含的<code>test.h</code>文件中的一个关于<code>void f()</code>的声明，所以，编译器将这里的f看作外部连接类型，即认为它的函数实现代码在另一个<code>.obj</code>文件中，本例也就是<code>test.obj</code>，也就是说，<code>main.obj</code>中实际没有关于f函数的哪怕一行二进制代码，而这些代码实际存在于<code>test.cpp</code>所编译成的<code>test.obj</code>中。在<code>main.obj</code>中对<code>f</code>的调用只会生成一行<code>call</code>指令，像这样<code>call addr_f</code>。</p>
<p>在编译时，这个<code>call</code>指令显然是错误的，因为<code>main.obj</code>中并无一行<code>f</code>的实现代码。那怎么办呢？这就是连接器的任务，连接器负责在其它的<code>.obj</code>中（本例为test.obj）寻找<code>f</code>的实现代码，找到以后将<code>call addr_f</code>这个指令的调用地址换成实际的<code>f</code>的函数进入点地址。需要注意的是：连接器实际上将工程里的<code>.obj</code>连接成了一个<code>.exe</code>文件，而它最关键的任务就是上面说的，寻找一个外部连接符号在另一个<code>.obj</code>中的地址，然后替换原来的虚假地址。</p>
<p>更细致的讲，<code>call addr_f</code>这行指令其实并不是这样的，它实际上是所谓的<code>stub</code>，也就是一个<code>jmp 0xABCDEF</code>。这个地址可能是任意的，然而关键是这个地址上有一行指令来进行真正的<code>call addr_f</code>动作。也就是说，这个<code>.obj</code>文件里面所有对f的调用都<code>jmp</code>向同一个地址。这样做的好处就是连接器修改地址时只要对后者的<code>call XXX</code>地址作改动就行了。但是，连接器是如何找到<code>f</code>的实际地址的呢（在本例中这处于test.obj中），因为<code>.obj</code>与<code>.exe</code>的格式是一样的，在这样的文件中有一个符号导入表和符号导出表（<code>import table</code>和<code>export table</code>）其中将所有符号和它们的地址关联起来。这样连接器只要在test.obj的符号导出表中寻找符号f（当然C++对f作了mangling）的地址就行了，然后作一些偏移量处理后（因为是将两个.obj文件合并，当然地址会有一定的偏移，这个连接器清楚）写入<code>main.obj</code>中的符号导入表中<code>f</code>所占有的那一项即可。</p>
<h3 id="模板类的问题所在"><a href="#模板类的问题所在" class="headerlink" title="模板类的问题所在"></a>模板类的问题所在</h3><p>而对于模板类来说，举前面<code>calculate</code>代码的例子。由于C++标准明确表示<strong>当一个模板不被用到的时侯它就不该被实例化出来</strong>(因为编译器根本不知道要实例化为哪一种类型)，所以对<code>calculate.cpp</code>的编译不会生成任何代码。而对<code>main.cpp</code>编译时，发现存在<code>add&lt;int&gt;</code>函数，于是寄予希望给连接器，希望它能在其他的<code>.obj</code>文件中找到接口。而<code>calculate.obj</code>因为模板从来没有实例化过，所以就会提示链接错误。</p>
<p>如果将模板的定义和实现放到<code>.h</code>文件中，那么在<code>main.cpp</code>中就会就地展开，并实例化为<code>Calculate&lt;int&gt;</code>类，从而能够顺利进行调用。所以归其根本在于这种<code>分离式编译</code>的方法，导致我们必须要在<code>.h</code>中实现模板类的所有定义。</p>
<p><em>注：在boost中，能看到很多<code>.hpp</code>文件，该文件就是大量的模板类。</em></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">c++</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">template</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/cplusplus/" class="article-tag-list-link color5">cplusplus</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/16/cxx/cplusplus-template-usage/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-cxx/cplusplus-function-pointer" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/14/cxx/cplusplus-function-pointer/">c++ 函数指针</a>
    </h1>
  

        
        <a href="/2017/04/14/cxx/cplusplus-function-pointer/" class="archive-article-date">
  	<time datetime="2017-04-14T14:48:20.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-14</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>函数对象也是一种变量，函数变量的值是函数的入口地址。函数指针是指向函数类型的指针。C++是强类型语言，因此该函数指针必须显示的声明其指向哪一类函数对象。决定函数对象的有两个部分，一个是<code>返回值</code>，一个是<code>形参类型</code>。</p>
<h3 id="函数指针调用同类型的不同函数"><a href="#函数指针调用同类型的不同函数" class="headerlink" title="函数指针调用同类型的不同函数"></a>函数指针调用同类型的不同函数</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">float</span> <span class="title">add</span><span class="params">(<span class="keyword">float</span> a, <span class="keyword">float</span> b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> (a + b);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">float</span> <span class="title">minus</span><span class="params">(<span class="keyword">float</span> a, <span class="keyword">float</span> b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> (a - b);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">float</span> (*p1)(<span class="keyword">float</span>, <span class="keyword">float</span>);</div><div class="line">    <span class="keyword">float</span> (*p2)(<span class="keyword">float</span>, <span class="keyword">float</span>);</div><div class="line">    p1 = add;</div><div class="line">    p2 = minus;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; p1(<span class="number">1.0</span>, <span class="number">2.0</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; p2(<span class="number">1.0</span>, <span class="number">2.0</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="函数指针作为形参传递-接上面的代码"><a href="#函数指针作为形参传递-接上面的代码" class="headerlink" title="函数指针作为形参传递 - 接上面的代码"></a>函数指针作为形参传递 - 接上面的代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// use `using` to simplify the code</span></div><div class="line"><span class="keyword">using</span> ops = <span class="keyword">float</span>(*)(<span class="keyword">float</span>, <span class="keyword">float</span>);</div><div class="line"></div><div class="line"><span class="comment">// surly, you also could use `float(*p)(float, float) to replace `ops p`</span></div><div class="line"><span class="function"><span class="keyword">float</span> <span class="title">calculate</span><span class="params">(<span class="keyword">float</span> a, <span class="keyword">float</span> b, ops p)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> p(a, b);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; calculate(<span class="number">1.0</span>, <span class="number">2.0</span>, add) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; calculate(<span class="number">1.0</span>, <span class="number">2.0</span>, minus) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">c++</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/cplusplus/" class="article-tag-list-link color5">cplusplus</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/14/cxx/cplusplus-function-pointer/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-tools/visual-studio-lib-dll-usage" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/14/tools/visual-studio-lib-dll-usage/">关于LIB和DLL的区别和使用</a>
    </h1>
  

        
        <a href="/2017/04/14/tools/visual-studio-lib-dll-usage/" class="archive-article-date">
  	<time datetime="2017-04-14T08:13:30.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-14</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>以前用<code>visual studio c++</code>写玩具的时候，就是单工程单项目，也很少使用外部库例如<code>openCV</code>等。但明显很多东西需要分开写，比如为某个算法提供的基础方法等。因此，需要分离项目。简单的说，一个入口程序<code>.exe</code>提供入口方法，调用不同的dll和lib库的实现运行产品。然而，以前一直没怎么弄懂<code>dll</code>和<code>lib</code>的区别，使用也是稀里糊涂的说不清。</p>
<blockquote>
<p>以下内容部分来自：<a href="http://www.cppblog.com/amazon/archive/2009/09/04/95318.html" target="_blank" rel="external">http://www.cppblog.com/amazon/archive/2009/09/04/95318.html</a></p>
</blockquote>
<h3 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h3><p>DLL库中记录了函数位置的<code>入口地址</code>，代码在<code>运行时</code>加载进进程空间。<br>LIB库中包含了函数本身的<code>实现</code>，在<code>编译时</code>将代码加入到程序中。</p>
<h3 id="LIB的使用"><a href="#LIB的使用" class="headerlink" title="LIB的使用"></a>LIB的使用</h3><p>在Visual Studio-&gt;属性-&gt;连接器-&gt;输入-&gt;附加依赖项，中添加<code>lib</code>文件。此外，为索引到文件地址，仍然需要在<code>属性-&gt;VC++目录-&gt;库目录</code>增加<code>lib</code>文件的路径，如果需要使用到<code>头文件</code>，还需要在<code>包含目录</code>中填充<code>.h</code>目录。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">vs</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/cplusplus/" class="article-tag-list-link color5">cplusplus</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/14/tools/visual-studio-lib-dll-usage/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-tools/visual-studio-fatal-solution" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/14/tools/visual-studio-fatal-solution/">Visual Studio C++ 异常处理</a>
    </h1>
  

        
        <a href="/2017/04/14/tools/visual-studio-fatal-solution/" class="archive-article-date">
  	<time datetime="2017-04-14T08:05:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-14</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近遇到一系列的<code>visual studio c++</code>的编译问题，在这里将遇到的问题整理下来，以便未来遇到时能够进行参考。</p>
<h3 id="Error-LNK2005-已经在-obj中定义，找到一个或多个多重定义的符号"><a href="#Error-LNK2005-已经在-obj中定义，找到一个或多个多重定义的符号" class="headerlink" title="Error: LNK2005 已经在 *.obj中定义，找到一个或多个多重定义的符号"></a>Error: LNK2005 已经在 *.obj中定义，找到一个或多个多重定义的符号</h3><p>在<code>c++</code>的头文件中，应该只包含声明以及<code>inline 函数</code>, <code>模板类/函数模板</code>的定义。如果在<code>.h</code>文件中实现了某个函数，并在多个<code>.cpp</code>中调用该头文件，会出现该问题。解决方法是，在一个<code>.cpp</code>中进行函数的实现，在<code>.h</code>文件中进行声明。</p>
<blockquote>
<p>转载： <a href="http://blog.csdn.net/qq_32541007/article/details/51607291" target="_blank" rel="external">http://blog.csdn.net/qq_32541007/article/details/51607291</a></p>
</blockquote>
<p>问题在于没有把握清楚头文件的作用以及CPP之间函数与变量命名方式的规则, 头文件的内容：</p>
<ul>
<li>类型(struct-第7章)及类(class-第8章)的声明</li>
<li>函数的声明</li>
<li>inline函数的定义与实现</li>
<li>符号常量的定义及常变量的定义</li>
<li>全局变量的extern声明</li>
<li>其它需要的头文件</li>
</ul>
<p>cpp之间的全局变量不能同名，所以不能在头文件中定义一个变量后在两个cpp中都包含头文件，否则会报上述错误。解决方法是加const 限定，另外不同cpp之间的函数必须要有区分（函数名，参数类型）否则也会报错。要调用cpp之间变量或函数必须加申明。</p>
<h3 id="关于头文件包含问题"><a href="#关于头文件包含问题" class="headerlink" title="关于头文件包含问题"></a>关于头文件包含问题</h3><p>我现在见到两种方式避免重复包含。第一种是：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></div></pre></td></tr></table></figure></p>
<p>第二种是：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _QUICK_SORT_H_</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> _QUICK_SORT_H_</span></div><div class="line"><span class="comment">// your code block</span></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure></p>
<p>两种方式的区别是：<br>第一种是微软独有的方式，可能在跨平台下不能正常编译<code>未测试</code>。<br>第二种是传统从<code>c</code>时代演变过来的方法，可泛平台使用，但缺点也很明显，你的所有文件的宏声明都不能重复。</p>
<h3 id="warning-LNK4042-对象被多次指定-已忽略多余的指定"><a href="#warning-LNK4042-对象被多次指定-已忽略多余的指定" class="headerlink" title="warning LNK4042: 对象被多次指定;已忽略多余的指定"></a>warning LNK4042: 对象被多次指定;已忽略多余的指定</h3><p>在资源管理器中把<code>.h</code>误生成<code>.cpp</code>，然后自己在资源管理器中改了名字，导致出现这个问题。解决方法是将提示错误的头文件删除，重新添加一份就好了。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">c++</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">vs</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/cplusplus/" class="article-tag-list-link color5">cplusplus</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/14/tools/visual-studio-fatal-solution/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 JIN
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),m=e(75),g=r(m),w=e(70);l(),(0,w.addLoadEvent)(function(){g.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),m=x[f],g=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&g&&void 0!==g[a],s&&a in x||(l=s?g[a]:e[a],x[a]=d&&"function"!=typeof g[a]?e[a]:h&&s?i(l,r):b&&g[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,m,g,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=m==h,M=!1,A=t.prototype,T=A[p]||A[v]||m&&A[m],L=T||j(m),N=m?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,m)if(O={values:E?L:j(h),keys:g?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),m=e(10),g=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),m(t),n=w(n,!0),m(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){m(t);for(var e,r=b(n=g(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=g(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(g(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:g(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.234bc0.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 100%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">This is Tags Cloud</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">c++</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">python</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">image</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">format</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">memory</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">template</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">STL</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">tensorflow</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">cnn</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">git</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">github</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">database</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">benchmark</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">machine-learning</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">linux</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">hexo</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">vscode</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">vs</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    

    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>
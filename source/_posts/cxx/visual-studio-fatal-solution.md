---
title: Visual Studio C++ 异常处理
date: 2017-04-14 16:05:05
tags:
 - vs
 - c++
categories:
 - c++
---
最近遇到一系列的`visual studio c++`的编译问题，在这里将遇到的问题整理下来，以便未来遇到时能够进行参考。

### Error: LNK2005 已经在 *.obj中定义，找到一个或多个多重定义的符号
在`c++`的头文件中，应该只包含声明以及`inline 函数`, `模板类/函数模板`的定义。如果在`.h`文件中实现了某个函数，并在多个`.cpp`中调用该头文件，会出现该问题。解决方法是，在一个`.cpp`中进行函数的实现，在`.h`文件中进行声明。

> 转载： http://blog.csdn.net/qq_32541007/article/details/51607291

问题在于没有把握清楚头文件的作用以及CPP之间函数与变量命名方式的规则, 头文件的内容：
- 类型(struct-第7章)及类(class-第8章)的声明
- 函数的声明
- inline函数的定义与实现
- 符号常量的定义及常变量的定义
- 全局变量的extern声明
- 其它需要的头文件

cpp之间的全局变量不能同名，所以不能在头文件中定义一个变量后在两个cpp中都包含头文件，否则会报上述错误。解决方法是加const 限定，另外不同cpp之间的函数必须要有区分（函数名，参数类型）否则也会报错。要调用cpp之间变量或函数必须加申明。

### 关于头文件包含问题
我现在见到两种方式避免重复包含。第一种是：
```c++
#pragma once
```
第二种是：
```c++
#ifndef _QUICK_SORT_H_
#define _QUICK_SORT_H_
// your code block
#endif
```
两种方式的区别是：
第一种是微软独有的方式，可能在跨平台下不能正常编译`未测试`。
第二种是传统从`c`时代演变过来的方法，可泛平台使用，但缺点也很明显，你的所有文件的宏声明都不能重复。


### warning LNK4042: 对象被多次指定;已忽略多余的指定
在资源管理器中把`.h`误生成`.cpp`，然后自己在资源管理器中改了名字，导致出现这个问题。解决方法是将提示错误的头文件删除，重新添加一份就好了。